<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dinner Options Spinning Wheel</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f0f0f0;
    margin: 0;
  }
  .wheel-container {
    position: relative;
    margin-bottom: 20px;
  }
  .wheel {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    border: 10px solid #333;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }
  #saladWheelContainer {
    display: none;
  }
  button {
    margin: 10px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }
  #result, #saladResult {
    margin-top: 20px;
    font-size: 20px;
    font-weight: bold;
    min-height: 30px;
  }
</style>
</head>
<body>
  <!-- Main Wheel -->
  <div class="wheel-container" id="mainWheelContainer">
    <div class="wheel" id="wheel"></div>
    <button id="spinButton">Spin the Wheel</button>
    <div id="result"></div>
  </div>

  <!-- Salad Wheel (hidden by default) -->
  <div class="wheel-container" id="saladWheelContainer">
    <div class="wheel" id="saladWheel"></div>
    <button id="saladSpinButton">Spin Salad Wheel</button>
    <button id="backButton">Back to Main Wheel</button>
    <div id="saladResult"></div>
  </div>

<script>
  // Dinner options for main wheel
  const dinnerOptions = [
    "Pizza",
    "Sushi",
    "Pasta",
    "Tacos",
    "Salad",
    "Burgers",
    "Curry",
    "Steak"
  ];

  // Salad options for secondary wheel
  const saladOptions = [
    "Caesar Salad",
    "Greek Salad",
    "Cobb Salad",
    "Garden Salad",
    "Caprese Salad",
    "Waldorf Salad",
    "Nicoise Salad",
    "Fruit Salad"
  ];

  // DOM elements
  const wheel = document.getElementById('wheel');
  const saladWheel = document.getElementById('saladWheel');
  const result = document.getElementById('result');
  const saladResult = document.getElementById('saladResult');
  const spinButton = document.getElementById('spinButton');
  const saladSpinButton = document.getElementById('saladSpinButton');
  const backButton = document.getElementById('backButton');
  const mainWheelContainer = document.getElementById('mainWheelContainer');
  const saladWheelContainer = document.getElementById('saladWheelContainer');

  // Create canvases
  const canvas = document.createElement('canvas');
  canvas.width = 300;
  canvas.height = 300;
  wheel.appendChild(canvas);
  const ctx = canvas.getContext('2d');

  const saladCanvas = document.createElement('canvas');
  saladCanvas.width = 300;
  saladCanvas.height = 300;
  saladWheel.appendChild(saladCanvas);
  const saladCtx = saladCanvas.getContext('2d');

  // Wheel configuration
  const centerX = 150;
  const centerY = 150;
  const radius = 140;
  const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#66FF66', '#FF6666'];

  // Initialize wheels
  drawWheel(ctx, dinnerOptions, 0);
  drawWheel(saladCtx, saladOptions, 0);

  // Event listeners
  spinButton.addEventListener('click', () => spinWheel(ctx, dinnerOptions, result, handleMainResult));
  saladSpinButton.addEventListener('click', () => spinWheel(saladCtx, saladOptions, saladResult));
  backButton.addEventListener('click', showMainWheel);

  function drawWheel(context, options, currentAngle) {
    context.clearRect(0, 0, 300, 300);
    const numOptions = options.length;
    const arcSize = (2 * Math.PI) / numOptions;

    for (let i = 0; i < numOptions; i++) {
      const startAngle = currentAngle + i * arcSize;
      const endAngle = startAngle + arcSize;

      // Draw segment
      context.beginPath();
      context.moveTo(centerX, centerY);
      context.arc(centerX, centerY, radius, startAngle, endAngle);
      context.fillStyle = colors[i % colors.length];
      context.fill();
      context.stroke();

      // Draw text
      context.save();
      context.translate(centerX, centerY);
      context.rotate(startAngle + arcSize / 2);
      context.textAlign = "right";
      context.fillStyle = "#000";
      context.font = "bold 16px Arial";
      context.fillText(options[i], radius - 10, 10);
      context.restore();
    }
  }

  function spinWheel(context, options, resultElement, callback) {
    let currentAngle = 0;
    let spinning = true;
    resultElement.textContent = "";

    let spinTime = 0;
    const spinDuration = 4000;
    const spinSpeed = Math.random() * 10 + 10;
    const numOptions = options.length;

    function animate() {
      spinTime += 30;
      currentAngle += spinSpeed * (1 - spinTime / spinDuration) * 0.1;
      currentAngle %= 2 * Math.PI;
      
      drawWheel(context, options, currentAngle);
      
      if (spinTime < spinDuration) {
        requestAnimationFrame(animate);
      } else {
        spinning = false;
        const degrees = (currentAngle * 180 / Math.PI) % 360;
        const index = Math.floor((360 - degrees) / (360 / numOptions)) % numOptions;
        
        if (callback) {
          callback(options[index]);
        } else {
          resultElement.textContent = `You should have: ${options[index]}`;
        }
      }
    }
    animate();
  }

  function handleMainResult(selectedOption) {
    result.textContent = `You should have: ${selectedOption}`;
    
    // Show salad wheel if salad is selected
    if (selectedOption === "Salad") {
      mainWheelContainer.style.display = "none";
      saladWheelContainer.style.display = "block";
      saladResult.textContent = "";
    }
  }

  function showMainWheel() {
    saladWheelContainer.style.display = "none";
    mainWheelContainer.style.display = "block";
    result.textContent = "";
  }
</script>
</body>
</html>
